{"version":3,"sources":["components/Control.js","utils/index.js","components/Map.js","components/Legend.js","App.js","reportWebVitals.js","index.js"],"names":["BoxWrapper","styled","div","_templateObject","_taggedTemplateLiteral","Control","_ref","layer","handleChange","_jsx","children","Box","sx","minWidth","_jsxs","FormControl","fullWidth","InputLabel","id","Select","labelId","value","label","onChange","MenuItem","colorArr","cases","deaths","recovered","radiusArr","parseMapboxArr","maxAmount","inputArr","property","level","String","Math","trunc","length","parsedLevel","substring","repeat","mapboxArr","forEach","el","index","push","parseLegendList","map","color","text","concat","toLocaleString","mapboxgl","accessToken","Map","props","data","mapboxElRef","useRef","setMap","useState","useEffect","createMap","container","current","style","center","zoom","addControl","NavigationControl","GeolocateControl","fitBoundsOptions","maxZoom","isLayerExist","layerId","isNil","getLayer","createSource","sourceId","geoData","isSourceExist","getSource","addSource","type","features","layers","setLayerVisible","visible","visibility","getLayoutProperty","setLayoutProperty","once","createLayer","circleColorArr","circleRadiusArr","addLayer","source","paint","generateLayerTooltip","popup","Popup","closeButton","closeOnClick","lastId","on","e","properties","country","province","getCanvas","cursor","coordinates","geometry","slice","provinceHTML","mortalityRate","toFixed","HTML","setLngLat","setHTML","addTo","undefined","remove","className","ref","LegendPanel","LegendItem","_templateObject2","width","LegendColorWrapper","_templateObject3","_ref2","LegendColor","_templateObject4","_ref3","_ref4","_ref5","Legend","capitalize","title","legendList","App","setLayer","oriData","point","Long_","Lat","Country_Region","Number","Confirmed","Deaths","Recovered","max","item","flexGrow","AppBar","position","Toolbar","variant","Typography","href","event","target","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.24770c23.chunk.js","sourcesContent":["import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Box from \"@mui/material/Box\";\r\nimport InputLabel from \"@mui/material/InputLabel\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\nimport Select from \"@mui/material/Select\";\r\n\r\nconst BoxWrapper = styled.div`\r\n  position: absolute;\r\n  top: 50px;\r\n  left: 0;\r\n  margin: 10px;\r\n  z-index: 1;\r\n  background-color: white;\r\n  border-radius: 4px;\r\n`;\r\n\r\nfunction Control({ layer, handleChange }) {\r\n  return (\r\n    <BoxWrapper>\r\n      <Box sx={{ minWidth: 120 }}>\r\n        <FormControl fullWidth>\r\n          <InputLabel id=\"demo-simple-select-label\">Layer</InputLabel>\r\n          <Select\r\n            labelId=\"demo-simple-select-label\"\r\n            id=\"demo-simple-select\"\r\n            value={layer}\r\n            label=\"Layer\"\r\n            onChange={handleChange}\r\n          >\r\n            <MenuItem value={\"cases\"}>Cases</MenuItem>\r\n            <MenuItem value={\"deaths\"}>Deaths</MenuItem>\r\n            <MenuItem value={\"recovered\"}>Recovered</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n      </Box>\r\n    </BoxWrapper>\r\n  );\r\n}\r\n\r\nexport default Control;\r\n","export const colorArr = {\r\n  cases: [\"#ffffb2\", \"#fed976\", \"#feb24c\", \"#fd8d3c\", \"#f03b20\", \"#bd0026\"],\r\n  deaths: [\"#f1eef6\", \"#d4b9da\", \"#c994c7\", \"#df65b0\", \"#dd1c77\", \"#980043\"],\r\n  recovered: [\"#ffffcc\", \"#d9f0a3\", \"#addd8e\", \"#78c679\", \"#31a354\", \"#006837\"],\r\n};\r\n\r\nexport const radiusArr = [1, 10, 20, 30, 40, 50];\r\n\r\nexport const parseMapboxArr = (maxAmount, inputArr, property) => {\r\n  const level = String(Math.trunc(maxAmount / inputArr.length));\r\n  const parsedLevel =\r\n    level.substring(0, 2) +\r\n    \"0\".repeat(level.length - 2); /** ex: 25678 => 25000 */\r\n  let mapboxArr = [\"interpolate\", [\"linear\"], [\"get\", property]];\r\n  inputArr.forEach((el, index) => {\r\n    mapboxArr.push(parsedLevel * index);\r\n    mapboxArr.push(el);\r\n  });\r\n  return mapboxArr;\r\n};\r\n\r\nexport const parseLegendList = (maxAmount, colorArr) => {\r\n  const level = String(Math.trunc(maxAmount / colorArr.length));\r\n  const parsedLevel =\r\n    level.substring(0, 2) +\r\n    \"0\".repeat(level.length - 2); /** ex: 25678 => 25000 */\r\n  const legendList = colorArr.map((el, index) => ({\r\n    color: el,\r\n    text: `${(parsedLevel * index).toLocaleString(\"en-US\")}`,\r\n  }));\r\n  return legendList;\r\n};\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport mapboxgl from \"mapbox-gl\";\r\nimport { isNil } from \"lodash-es\";\r\nimport { parseMapboxArr } from \"./../utils\";\r\n\r\nmapboxgl.accessToken =\r\n  \"pk.eyJ1IjoiY29kZXdqb3kiLCJhIjoiY2xlenE0dnE2MDFueTNycDJrMnc5Y2twcCJ9.p7bcH7fkoTbnOYDRUyGVsw\";\r\n\r\nfunction Map(props) {\r\n  const { data, maxAmount, colorArr, radiusArr, layer } = props;\r\n  const mapboxElRef = useRef(null); // DOM element to render map\r\n  const [map, setMap] = useState(null);\r\n\r\n  const createMap = () => {\r\n    const map = new mapboxgl.Map({\r\n      container: mapboxElRef.current,\r\n      style: \"mapbox://styles/notalemesa/ck8dqwdum09ju1ioj65e3ql3k\",\r\n      center: [16, 27], // initial geo location\r\n      zoom: 2, // initial zoom\r\n    });\r\n\r\n    // Add navigation controls to the top right of the canvas\r\n    map.addControl(new mapboxgl.NavigationControl());\r\n\r\n    // Add navigation to center the map on your geo location\r\n    map.addControl(\r\n      new mapboxgl.GeolocateControl({\r\n        fitBoundsOptions: { maxZoom: 6 },\r\n      })\r\n    );\r\n    setMap(map);\r\n  };\r\n\r\n  // Initialize our map\r\n  useEffect(() => {\r\n    createMap();\r\n  }, []);\r\n\r\n  const isSourceExist = (map, sourceId) => !isNil(map.getSource(sourceId));\r\n  const isLayerExist = (map, layerId) => !isNil(map.getLayer(layerId));\r\n\r\n  const createSource = (map, sourceId, geoData) => {\r\n    if (map && !isSourceExist(map, sourceId)) {\r\n      map.addSource(sourceId, {\r\n        type: \"geojson\",\r\n        data: {\r\n          type: \"FeatureCollection\",\r\n          features: geoData,\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  const layers = [\"cases\", \"deaths\", \"recovered\"];\r\n  const createLayer = (map, layerId, sourceId) => {\r\n    const circleColorArr = parseMapboxArr(\r\n      maxAmount[layerId],\r\n      colorArr[layerId],\r\n      layerId\r\n    );\r\n    const circleRadiusArr = parseMapboxArr(\r\n      maxAmount[layerId],\r\n      radiusArr,\r\n      layerId\r\n    );\r\n    if (map && !isLayerExist(map, layerId)) {\r\n      map.addLayer({\r\n        id: layerId,\r\n        source: sourceId, // this should be the id of source\r\n        type: \"circle\",\r\n        paint: {\r\n          \"circle-opacity\": 0.75,\r\n          \"circle-stroke-width\": 1,\r\n          \"circle-radius\": circleRadiusArr,\r\n          \"circle-color\": circleColorArr,\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  const setLayerVisible = (map, id, visible) => {\r\n    if (!map || !isLayerExist(map, id)) return;\r\n    const visibility = visible ? \"visible\" : \"none\";\r\n    if (map.getLayoutProperty(id, \"visibility\") !== visibility)\r\n      map.setLayoutProperty(id, \"visibility\", visibility);\r\n  };\r\n\r\n  const generateLayerTooltip = (map, id) => {\r\n    const popup = new mapboxgl.Popup({\r\n      closeButton: false,\r\n      closeOnClick: false,\r\n    });\r\n\r\n    let lastId;\r\n\r\n    map.on(\"mousemove\", id, (e) => {\r\n      const id = e.features[0].properties.id;\r\n\r\n      if (id !== lastId) {\r\n        lastId = id;\r\n        const { cases, deaths, country, province } = e.features[0].properties;\r\n\r\n        // Change the pointer type on mouseenter\r\n        map.getCanvas().style.cursor = \"pointer\";\r\n\r\n        const coordinates = e.features[0].geometry.coordinates.slice();\r\n\r\n        const provinceHTML =\r\n          province !== \"null\" ? `<p>Province: <b>${province}</b></p>` : \"\";\r\n        const mortalityRate = ((deaths / cases) * 100).toFixed(2);\r\n\r\n        const HTML = `<p>Country: <b>${country}</b></p>\r\n                ${provinceHTML}\r\n                <p>Cases: <b>${cases}</b></p>\r\n                <p>Deaths: <b>${deaths}</b></p>\r\n                <p>Mortality Rate: <b>${mortalityRate}%</b></p>\r\n                `;\r\n\r\n        // // Ensure that if the map is zoomed out such that multiple\r\n        // // copies of the feature are visible, the popup appears\r\n        // // over the copy being pointed to.\r\n        // while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\r\n        //     coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\r\n        // }\r\n\r\n        popup.setLngLat(coordinates).setHTML(HTML).addTo(map);\r\n      }\r\n    });\r\n\r\n    map.on(\"mouseleave\", \"cases\", function () {\r\n      lastId = undefined;\r\n      map.getCanvas().style.cursor = \"\";\r\n      popup.remove();\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (data && map) {\r\n      map.once(\"load\", () => {\r\n        // Add our SOURCE\r\n        createSource(map, \"points\", data);\r\n        // Add our layer\r\n        layers.forEach((el) => createLayer(map, el, \"points\"));\r\n        // Set first layer visible, others invisible\r\n        layers.forEach((el, index) => setLayerVisible(map, el, index === 0));\r\n        layers.forEach((el) => generateLayerTooltip(map, el));\r\n      });\r\n    }\r\n  }, [data, map]);\r\n\r\n  useEffect(() => {\r\n    if (map) {\r\n      layers.forEach((el) => {\r\n        if (layer === el) {\r\n          setLayerVisible(map, el, true);\r\n        } else {\r\n          setLayerVisible(map, el, false);\r\n        }\r\n      });\r\n    }\r\n  }, [layer, map]);\r\n\r\n  return <div className=\"mapContainer\" ref={mapboxElRef} />;\r\n}\r\n\r\nexport default Map;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { capitalize } from 'lodash-es';\r\n\r\nconst LegendPanel = styled.div`\r\n  position: absolute;\r\n  bottom: 0;\r\n  right: 0;\r\n  margin: 30px 10px;\r\n  padding: 10px;\r\n  background-color: rgb(255, 255, 255, 0.8);\r\n  border-radius: 5px;\r\n  font-family: 'Arial';\r\n  .legendTitle {\r\n      font-size: 25px;\r\n      font-weight: bold;\r\n      margin: 0 0 10px 0;\r\n      text-align: center;\r\n  }\r\n  .legendSubTitle {\r\n    font-size: 15px;\r\n    margin: 0 0 15px 0;\r\n    text-align: center;\r\n  }\r\n`;\r\nconst LegendItem = styled.div`\r\n  display:flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  height: ${({ width }) => `${width * 5}px`};\r\n`;\r\nconst LegendColorWrapper = styled.div`\r\n  width: ${({ width }) => `${width * 5}px`};\r\n  display:flex;\r\n  justify-content: center;\r\n`;\r\nconst LegendColor = styled.div`\r\n  width: ${({ width }) => `${width * 5}px`};\r\n  height: ${({ width }) => `${width * 5}px`};\r\n  background-color: ${({ color }) => color};\r\n  border: black 1px solid;\r\n  border-radius: 50%;\r\n`;\r\n\r\nfunction Legend(props) {\r\n    return (\r\n        <LegendPanel>\r\n             <div className=\"legendTitle\">\r\n                {capitalize(props.title)}\r\n             </div>\r\n             <div className=\"legendSubTitle\">World Total Amount</div>\r\n            {\r\n                props.legendList && props.legendList.map((el, index) => (\r\n                    <LegendItem key={index} width={props.legendList.length + 1}>\r\n                          <LegendColorWrapper width={props.legendList.length + 1}>\r\n                            <LegendColor color={el.color} width={index + 1}/>\r\n                          </LegendColorWrapper> \r\n                        <div className=\"legendText\">\r\n                            {el.text}\r\n                        </div>\r\n                    </LegendItem>\r\n                ))\r\n            }\r\n        </LegendPanel>\r\n    );\r\n}\r\n\r\nexport default Legend;\r\n\r\n","import React, { useState } from \"react\";\r\n// import useSWR from 'swr';\r\nimport \"./App.scss\";\r\n// Need mapbox css for tooltips later in the tutorial\r\nimport \"mapbox-gl/dist/mapbox-gl.css\";\r\nimport Control from \"./components/Control\";\r\nimport Map from \"./components/Map\";\r\nimport Legend from \"./components/Legend\";\r\nimport { parseLegendList, colorArr, radiusArr } from \"./utils\";\r\nimport oriData from \"./data/covidData.json\";\r\nimport AppBar from \"@mui/material/AppBar\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Toolbar from \"@mui/material/Toolbar\";\r\nimport Typography from \"@mui/material/Typography\";\r\n\r\nfunction App() {\r\n  const [layer, setLayer] = useState(\"cases\");\r\n\r\n  const data = oriData.map((point, index) => ({\r\n    type: \"Feature\",\r\n    geometry: {\r\n      type: \"Point\",\r\n      coordinates: [point.Long_, point.Lat],\r\n    },\r\n    properties: {\r\n      id: index,\r\n      country: point.Country_Region,\r\n      province: point.Country_Region,\r\n      cases: Number(point.Confirmed),\r\n      deaths: Number(point.Deaths),\r\n      recovered: Number(point.Recovered),\r\n    },\r\n  }));\r\n  // const fetcher = (url) =>\r\n  //   fetch(url)\r\n  //     .then((r) => r.json())\r\n  //     .then((data) =>\r\n  //       data.map((point, index) => ({\r\n  //         type: \"Feature\",\r\n  //         geometry: {\r\n  //           type: \"Point\",\r\n  //           coordinates: [\r\n  //             point.coordinates.longitude,\r\n  //             point.coordinates.latitude\r\n  //           ]\r\n  //         },\r\n  //         properties: {\r\n  //           id: index,\r\n  //           country: point.country,\r\n  //           province: point.province,\r\n  //           cases: point.stats.confirmed,\r\n  //           deaths: point.stats.deaths\r\n  //         }\r\n  //       }))\r\n  //     );\r\n\r\n  // const { data } = useSWR(\"https://disease.sh/v3/covid-19/jhucsse\", fetcher);\r\n\r\n  const maxAmount = data && {\r\n    cases: Math.max(...data.map((item) => item.properties.cases)),\r\n    deaths: Math.max(...data.map((item) => item.properties.deaths)),\r\n    recovered: Math.max(...data.map((item) => item.properties.recovered)),\r\n  };\r\n  const legendList = maxAmount && {\r\n    cases: parseLegendList(maxAmount[\"cases\"], colorArr[\"cases\"]),\r\n    deaths: parseLegendList(maxAmount[\"deaths\"], colorArr[\"deaths\"]),\r\n    recovered: parseLegendList(maxAmount[\"recovered\"], colorArr[\"recovered\"]),\r\n  };\r\n\r\n  const handleChange = (event) => {\r\n    setLayer(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Box sx={{ flexGrow: 1 }} className=\"header\">\r\n        <AppBar position=\"static\">\r\n          <Toolbar variant=\"dense\">\r\n            <Typography>\r\n              Csse Covid 19 Daily Reports 01-01-2021{\" \"}\r\n              <a href=\"https://github.com/CSSEGISandData/COVID-19/blob/master/csse_covid_19_data/csse_covid_19_daily_reports/01-01-2021.csv\">\r\n                Data Source\r\n              </a>\r\n            </Typography>\r\n          </Toolbar>\r\n        </AppBar>\r\n      </Box>\r\n      <main>\r\n        <Control layer={layer} handleChange={handleChange} />\r\n        <Map\r\n          data={data}\r\n          maxAmount={maxAmount}\r\n          colorArr={colorArr}\r\n          radiusArr={radiusArr}\r\n          layer={layer}\r\n        />\r\n        <Legend title={layer} legendList={legendList && legendList[layer]} />\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}